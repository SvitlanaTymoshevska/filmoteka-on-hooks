"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[452],{2452:function(n,e,t){t.r(e),t.d(e,{default:function(){return sn}});var r,i,a,o,c,s,p,u,d,l,h,x,g=t(5861),f=t(9439),m=t(7757),w=t.n(m),v=t(2791),b=t(1087),Z=t(4558),y=t(168),k=t(6444),j=k.ZP.section(r||(r=(0,y.Z)(["\n  position: relative;\n  flex-grow: 1;\n"]))),P=t(2007),_=t.n(P),S=t(6781),C=k.ZP.div(i||(i=(0,y.Z)(["\n  max-width: 320px;\n  margin: 0 auto;\n  padding: 20px 20px 40px;\n  line-height: 1.35;\n\n  @media screen and (min-width: 768px) {\n    max-width: 768px;\n    padding: 60px 32px 60px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    max-width: 1280px;\n    font-size: 20px;\n    line-height: 1.2;\n  }\n"]))),z=k.ZP.p(a||(a=(0,y.Z)(["\n  position: absolute;\n  top: -60px;\n  left: 50%;\n  transform: translate(-50%,-50%);\n  display: block; \n  text-align: center;\n  \n  color: ",";\n  font-weight: 400;\n  font-size: 14px;\n\n  @media screen and (min-width: 768px) {\n    top: -48px;\n  }\n"])),S.r.colors.warning),q=k.ZP.h2(o||(o=(0,y.Z)(["\n  display: none;\n"]))),E=k.ZP.ul(c||(c=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n\n  @media screen and (min-width: 768px) {\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 32px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    column-gap: 16px;\n  }\n"]))),N=t(3433),O=t(7689),T=k.ZP.li(s||(s=(0,y.Z)(["\n  transition: box-shadow ",";\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    width: calc((100% - 32px) / 2);\n  }\n\n  @media screen and (min-width: 1280px) {\n    width: calc((100% - 32px) / 3);\n  }\n\n  &:hover {\n    cursor: pointer;\n    box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.12),\n      0px 4px 4px rgba(0, 0, 0, 0.06), 1px 4px 6px rgba(0, 0, 0, 0.16);\n  }\n"])),S.r.transition.durationFunction),U=(0,k.ZP)(b.rU)(p||(p=(0,y.Z)(["\n  color: ",";\n"])),S.r.colors.secondary),R=k.ZP.img(u||(u=(0,y.Z)(["\n  display: block;\n  width: 100%;\n  height: 398px;\n  border-radius: 5px;\n  margin-bottom: 10px;\n  object-fit: cover;\n\n  @media screen and (min-width: 768px) {\n    height: 455px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    margin-bottom: 12px;\n    height: 574px;\n  }\n"]))),B=k.ZP.div(d||(d=(0,y.Z)(["\n  height: 398px;\n  margin-bottom: 10px;\n  padding: 10px;\n  border-radius: 5px;\n  background-color: ",";\n\n  @media screen and (min-width: 768px) {\n    height: 455px;\n  }\n\n  @media screen and (min-width: 1280px) {\n    margin-bottom: 12px;\n    height: 574px;\n  }\n"])),S.r.colors.backgroundHeader),F=k.ZP.div(l||(l=(0,y.Z)(["\n  padding: 0px 5px 5px;\n"]))),M=k.ZP.h2(h||(h=(0,y.Z)(["\n  margin: 0;\n  text-transform: uppercase;\n  line-height: 1.35;\n  font-size: 12px;\n  font-weight: 700;\n\n  @media screen and (min-width: 1280px) {\n    font-size: 20px;\n    line-height: 1.2;\n  }\n"]))),Q=k.ZP.p(x||(x=(0,y.Z)(["\ncolor: ",";\n"])),S.r.colors.accent),H=t(184),I=function(n){var e=JSON.parse(localStorage.getItem("genres"));if(!e)return"unknown";var t=n.map((function(n){return e.find((function(e){return e.id===n})).name}));return(t.length>2?[].concat((0,N.Z)(t.slice(0,2)),["Otheres"]):(0,N.Z)(t)).join(", ")},J=function(n){var e="";return n?(e=" | "+(null===n||void 0===n?void 0:n.slice(0,4)),e):e},A=function(n){var e=n.film,t=e.poster_path,r=e.title,i=e.genre_ids,a=e.release_date,o=e.id,c=(0,O.TH)(),s=t?(0,H.jsx)(R,{srcSet:"\n              https://image.tmdb.org/t/p/w300/".concat(t,"     300w,\n              https://image.tmdb.org/t/p/w500/").concat(t,"     500w,\n              https://image.tmdb.org/t/p/w780/").concat(t,"     780w,\n              https://image.tmdb.org/t/p/w1280/").concat(t,"    1280w,\n              https://image.tmdb.org/t/p/original/").concat(t," 2000w\n          "),loading:"lazy",src:"https://image.tmdb.org/t/p/w300/".concat(t),alt:"Poster of the film ".concat(r),sizes:"(max-width: 320px) 280px, (max-width: 768px) 340px, 400px"}):(0,H.jsx)(B,{children:"Poster not found"});return(0,H.jsx)(T,{children:(0,H.jsxs)(U,{to:"film/".concat(o),state:{from:c},children:[s,(0,H.jsxs)(F,{children:[(0,H.jsx)(M,{children:r}),(0,H.jsxs)(Q,{children:[I(i),J(a)]})]})]})})};A.propType={film:_().shape({genre_ids:_().arrayOf(_().number),poster_path:_().string,release_date:_().string,title:_().string.isRequired,id:_().string.isRequired})};var W=function(n){var e=n.error,t=n.films;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(q,{children:"Films gallery"}),e&&(0,H.jsx)(z,{children:"Search result not successful. Enter the correct movie name and repeat."}),(0,H.jsx)(C,{children:(0,H.jsx)(E,{children:t.map((function(n){return(0,H.jsx)(A,{film:n},n.id)}))})})]})};W.propType={error:_().string,film:_().shape({genre_ids:_().arrayOf(_().number),id:_().number.isRequired,poster_path:_().string,release_date:_().string,title:_().string.isRequired})};var Y,D,G,K,L,V=function(n,e){var t=e-n+1;return Array.from({length:t},(function(e,t){return t+n}))},X="<...",$="...>",nn=t(4373),en=k.ZP.ul(Y||(Y=(0,y.Z)(["\n    display: flex;\n    justify-content: center;\n    margin-bottom: 40px;\n\n    @media screen and (min-width: 768px) {\n        margin-bottom: 60px;\n    }\n"]))),tn=k.ZP.li(D||(D=(0,y.Z)(["\n    min-height: 40px;\n    min-width: 40px;\n\n    &:not(:last-child) {\n        margin-right: 6px;\n        \n        @media screen and (min-width: 768px) {\n            margin-right: 8px;\n        }\n    }\n"]))),rn=k.ZP.li(G||(G=(0,y.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    min-height: 40px;\n    min-width: 40px;\n    border-radius: 5px;\n    background-color: #f7f7f7;\n    \n    &:hover,\n    &:focus {\n        cursor: pointer;\n        color: ",";\n    }\n"])),S.r.colors.accent),an=k.ZP.div(K||(K=(0,y.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n    border-radius: 5px;\n\n    text-align: center;\n    font-size: 12px;\n    font-weight: 500;\n    line-height: 1.33;\n    background-color: ",";\n    color: ",";\n\n    &:hover,\n    &:focus {\n        cursor: pointer;\n        color: ",";\n    }\n"])),(function(n){return n.current?S.r.colors.accent:"transparent"}),(function(n){return n.current?S.r.colors.main:"inherit"}),S.r.colors.accent),on=k.ZP.div(L||(L=(0,y.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n    border-radius: 5px;\n"]))),cn=function(n){var e=n.currentPage,t=n.totalPageCount,r=n.onPageChange,i=function(n){var e=n.currentPage,t=n.totalPageCount,r=n.siblingCount,i=void 0===r?1:r;return(0,v.useMemo)((function(){if(i+5>=t)return V(1,t);var n=Math.max(e-i,1),r=Math.min(e+i,t),a=n>2,o=r<t-2,c=1,s=t;if(!a&&o){var p=V(1,3+2*i);return[].concat((0,N.Z)(p),[$,t])}if(a&&!o){var u=V(t-(3+2*i)+1,t);return[c,X].concat((0,N.Z)(u))}if(a&&o){var d=V(n,r);return[c,X].concat((0,N.Z)(d),[$,s])}}),[e,t,i])}({currentPage:e,totalPageCount:t});if(0===e||i.length<2)return null;var a=i[i.length-1];return(0,H.jsxs)(en,{children:[1!==e&&(0,H.jsx)(rn,{onClick:function(){r(e-1)},children:(0,H.jsx)(nn.PjY,{size:20})}),i.map((function(n){return(0,H.jsx)(tn,{children:n===X||n===$?(0,H.jsx)(on,{children:(0,H.jsx)(nn.mZq,{})}):(0,H.jsx)(an,{current:n===e,onClick:function(){return r(n)},children:n})},n)})),e!==a&&(0,H.jsx)(rn,{onClick:function(){r(e+1)},children:(0,H.jsx)(nn.fNt,{size:20})})]})},sn=function(){var n,e,t=(0,b.lr)(),r=(0,f.Z)(t,2),i=r[0],a=r[1],o=null!==(n=i.get("query"))&&void 0!==n?n:"",c=null!==(e=i.get("page"))&&void 0!==e?e:"1",s=(0,v.useState)([]),p=(0,f.Z)(s,2),u=p[0],d=p[1],l=(0,v.useState)(1),h=(0,f.Z)(l,2),x=h[0],m=h[1],y=(0,v.useState)(!1),k=(0,f.Z)(y,2),P=k[0],_=k[1];return(0,v.useEffect)((function(){function n(){return(n=(0,g.Z)(w().mark((function n(){var e;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Z.BQ)();case 3:e=n.sent,localStorage.setItem("genres",JSON.stringify(e)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),(0,v.useEffect)((function(){function n(){return(n=(0,g.Z)(w().mark((function n(){var e,t,r,i;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Z.cu)(Number(c),o);case 3:e=n.sent,t=(0,f.Z)(e,2),r=t[0],i=t[1],d(r),m(i),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),_(!0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}(),window.scrollTo(0,0)}),[c,o]),(0,v.useEffect)((function(){P&&(a({}),setTimeout((function(){_(!1)}),3e3))}),[P,a]),u&&(0,H.jsxs)(j,{children:[(0,H.jsx)(W,{error:P,films:u}),(0,H.jsx)(cn,{currentPage:Number(c),totalPageCount:x,onPageChange:function(n){return a(""!==o?{query:o,page:n}:{page:n})}})]})}},4558:function(n,e,t){t.d(e,{BQ:function(){return u},Bt:function(){return f},cu:function(){return s},lQ:function(){return l},y:function(){return x}});var r=t(5861),i=t(7757),a=t.n(i),o=t(3263),c="115b567d77b04428b1251a93b22d9778";function s(n,e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(a().mark((function n(e,t){var r,i,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="",r=t?"https://api.themoviedb.org/3/search/movie?api_key=".concat(c,"&query=").concat(t,"&page=").concat(e):"https://api.themoviedb.org/3/trending/movie/day?api_key=".concat(c,"&page=").concat(e),n.next=4,o.Z.get(r);case 4:if(i=n.sent,0!==(s=i.data.results).length||!t){n.next=8;break}throw new Error;case 8:return n.abrupt("return",[s,i.data.total_pages]);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(a().mark((function n(){var e,t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(c,"&language=en-US"),n.next=3,o.Z.get(e);case 3:return t=n.sent,n.abrupt("return",t.data.genres);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(n){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(a().mark((function n(e){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(c,"&language=en-US"),n.next=3,o.Z.get(t);case 3:return r=n.sent,n.abrupt("return",r.data);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function x(n){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(a().mark((function n(e){var t,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="https://api.themoviedb.org/3/movie/".concat(e,"/credits?api_key=").concat(c,"&language=en-US"),n.next=3,o.Z.get(t);case 3:return r=n.sent,n.abrupt("return",r.data.cast);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function f(n){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(a().mark((function n(e){var t,r,i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="https://api.themoviedb.org/3/movie/".concat(e,"/reviews?api_key=").concat(c,"&language=en-US&page=1"),n.next=3,o.Z.get(t);case 3:if(r=n.sent,0!==(i=r.data.results).length){n.next=7;break}throw new Error("We don't have any reviews for this movie.");case 7:return n.abrupt("return",i);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=452.5e269a73.chunk.js.map